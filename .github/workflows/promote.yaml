name: Promote development branch to master

on:
    push:
        branches:
            - development

jobs:
    promote-to-master-pr:
        name: Promote dev branch to master
        runs-on: ubuntu-latest
        steps:
            -   name: promote
                uses: vsoch/pull-request-action@master
                env:
                    GITHUB_TOKEN: ${{ secrets.PROMOTION_TOKEN }}
                    BRANCH_PREFIX: development
                    PULL_REQUEST_BRANCH: master
                    PULL_REQUEST_TITLE: Promote development to master
                    PULL_REQUEST_BODY: |
                        Automatic promotion from development to master.
            -   name: label-pr
                uses: TimonVS/pr-labeler-action@v3
                with:
                    configuration-path: .github/branch-pr-labels.yaml
                env:
                    GITHUB_TOKEN: ${{ secrets.PROMOTION_TOKEN }}
